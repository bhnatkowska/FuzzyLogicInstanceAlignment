# FuzzyLogicInstanceAlignment

FuzzyLogicRelationAlignment is a repository which contains:
- FOKI2.jar - a java precompliled program to identify mappings between instances of two OWL ontologies;
- onto.zip - a packed folder with ontologies (extended version of the OAEI 2018::Instance Matching Track (http://islab.di.unimi.it/content/im_oaei/2018/))
- fis.zip - a packed folder with a configuration for fuzzy logic used for instance alignment

The onto folder contains 80 subfolders (001 .. 080) with test cases.
Each subfolder contains:
- onto_source.owl - a source ontology
- onto_target.owl - a target ontology
- mappings.rdf - mappings generated by LogMap (to establish mappings between concepts and concept properties)
- FOKI_refalign.rdf - a mapping between instances generated by the Fuzzy2.jar 
- refalign.rdf - a reference mapping (part of OAEI competition) the generated mapping is compared to
- metrics2.txt - a precalculated metrics by the FOKI2.jar

Requirements:
- java jdk version 8.1 installed

The program can be run in two modes switched by the fuzzy_logic_only parameter:
- Full mode (fuzzy_logic_only set to false) - the program first considers all the pairs of instances from two ontologies, and - if they are promissing (have anything in common) it calculates the metrics and stores their values in metrics2.txt file. The calculation can take more than 2 hours! After that, the program uses a fuzzy logic module to decide if two instances from the source and target ontologies are equivalent or not; the equivalent instances are stored in the FOKI_refalign.rdf file; at the end the program compares the found alignments with the reference alignments (refalign.rdf) and prints Precision, Accurrcy, Recall, and F-Measure. 
 - Fuzzy only mode (fuzzy_logic_only set to true) - the program reads the metrics from metrics2.txt and uses the fuzzy logic module to decide if two instances are equivalent; the rest of processing is the same as in the full mode.

To run the program:
- Download the whole content of the repository to your computer
- Create a folder and copy FOKI2.jar to it and unpack onto.zip and fis.zip in it
- Being in that location open a console window and write:
java -jar -Xmx1024m FOKI2.jar ontology_folder fuzzy_logic_only [[start_test_id] [end_test_id]]
where:
- ontology_folder - a path to the folder with ontologies, e.g. onto, onto\001
- fuzzy_logic_only - false, to run the program in the full mode (see a remark below); false - to run the program in fuzzy logic only model
- start_test_id - an optional start test id (1 .. 80)
- end_test_id - an optional end test id (1 .. 80)

e.g.
java -jar -Xmx1024m FOKI2.jar onto\001 true    -- program run in the fuzzy only mode for test 1
java -jar -Xmx1024m FOKI2.jar onto\001 false   -- program run in the full mode (may take more than 2 hours) for test 1
java -jar -Xmx1024m FOKI2.jar onto true 1 20   -- program run in the fuzzy only mode for tests 1 .. 20
java -jar -Xmx1024m FOKI2.jar onto false 1 20  -- program run in the full mode (may take more than a day) for tests 1 .. 20
